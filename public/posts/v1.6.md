Today we are releasing Deno 1.6.0. This release contains a few new features,
many feature stabilizations, and a ton of bug fixes. Here are some highlights:

- [**Build self contained binaries**](#): TODO
- [**TypeScript 4.1**](#): TODO
- [**Built-in Deno Language Server**](#): TODO

If you already have Deno installed you can upgrade to 1.6 by running
`deno upgrade`. If you are installing Deno for the first time, you can use one
of the methods listed below:

```shell
# Using Shell (macOS and Linux):
curl -fsSL https://deno.land/x/install/install.sh | sh

# Using PowerShell (Windows):
iwr https://deno.land/x/install/install.ps1 -useb | iex

# Using Homebrew (macOS):
brew install deno

# Using Scoop (Windows):
scoop install deno

# Using Chocolatey (Windows):
choco install deno
```

# New features and changes

## `deno compile`: building self-contained, standalone binaries

<img src="/posts/v1.6/compile.gif">

Ever since Deno's inception, we have aimed to provide developer utilities, that
are often external programs in other ecosystems, in the Deno CLI out of the box.
Examples of this is `deno fmt`, and `deno lint`. Today we are pleased to add
another developer tool to the Deno toolchain: `deno compile`.

`deno compile` does for Deno what `nexe` or `pkg` do for Node: create a
standalone, self-contained binary from your JavaScript or TypeScript source
code. This has been the single most upvoted issue on the Deno issue tracker, and
we are glad to be able to deliver a first pass for this feature.

You can try it out yourself now:

```shell
$ deno compile --unstable https://deno.land/std@0.79.0/http/file_server.ts
Check https://deno.land/std@0.79.0/http/file_server.ts
Bundle https://deno.land/std@0.79.0/http/file_server.ts
Compile https://deno.land/std@0.79.0/http/file_server.ts
Emit file_server

$ ./file_server
HTTP server listening on http://0.0.0.0:4507/
```

The `deno compile` subcommand is currently still unstable, because we want to
investigate what use-cases you as a community can come up with, that might not
yet be optimally covered. If you have feedback, please comment on
[Deno discord](https://discord.gg/deno), or create an issue with feature
requests on the [Deno issue tracker](https://github.com/denoland/deno/issues).

### Current limitations

For now there are several limitations you may encounter when using
`deno compile`. If you have a use case for one of these, please respond in the
corresponding tracking issues.

- Web Workers are not currently supported. The tracking issue for this feature
  is [#8654](https://github.com/denoland/deno/issues/8654).
- You can not dynamically include code with dynamic import. The tracking issue
  for this feature is [#8655](https://github.com/denoland/deno/issues/8655).
- Customizing V8 flags, and sandbox permissions is not currently possible. The
  tracking issue for this feature is
  [#8656](https://github.com/denoland/deno/issues/8656).

### Future plans

You might have noticed that unlike other tools that create standalone,
self-contained binaries for JS (like `pkg`), `deno compile` does not have a
virtual file system that can be used to bundle assets. We are hoping that with
future TC39 proposals like
[`import assertions`](https://github.com/tc39/proposal-import-assertions), and
[`asset references`](https://github.com/tc39/proposal-asset-references), the
need for a virtual file system will disappear, because assets can be expressed
right in the JS module graph.

Currently the `deno compile` subcommand does not support cross platform
compilation. Compilation for a specific platform has to happen on that platform.
If there is demand, we would like to add the ability to cross compile for a
different architechture using a `--target` flag when compiling. The tracking
issue for this is [#8657](https://github.com/denoland/deno/issues/8657).

Due to how the packaging of the binary works currently, a lot of unneeded code
is included the binary. From preliminary tests we have determined that we could
reduce the final binary size by around 60% (to around 20MB) when stripping out
this unnecessary code. Work on this front is happening at the moment (e.g. in
[#8640](https://github.com/denoland/deno/pull/8640)).

## Built-in Deno Language Server

<img src="/posts/v1.6/lsp.gif">

Deno 1.6 ships with a new `deno lsp` subcommand that provides a language server
implementing
[Language Server Protocol](https://microsoft.github.io/language-server-protocol/).

[VSCode Deno](https://marketplace.visualstudio.com/items?itemName=denoland.vscode-deno)
is the official VSCode extension that implements a lot of functionality by
duplicating fundamental behaviours of Deno; a stark example is module resolution
logic that requires module specifiers with extensions or support for import
maps. Keeping extension logic in sync with Deno logic posed a significant
challenge in itself, while providing high quality IDE experience in an editor
other than VSCode would require to duplicate the efforts all over. Providing a
self-contained LSP implementation in Deno makes it easier to provide a
high-quality and unified editing experience for all code editors that understand
LSP.

The LSP is in the early stages of the development, but it already supports some
crucial features:

- Go to definition
- Go to references
- Hints on hover
- `deno fmt` integration
- `deno lint` integration

To track the progress of the development follow
[issue #8643](https://github.com/denoland/deno/issues/8643).

[VSCode Deno Canary](https://marketplace.visualstudio.com/items?itemName=denoland.vscode-deno-canary)
is a new version of VSCode extension that uses `deno lsp`. It is also in the
early stages of the development and is not yet as featureful as `VSCode Deno`.

_If you decide to give it a try make sure to disable the old version of the
extension, otherwise diagnostics might be duplicated._

## Migration to stricter type checks complete

Mention prev blog post. Now not configurable.

Reason we did this. Link to benchmark.

## TypeScript 4.1

Deno 1.6 ships with the latest stable version of TypeScript.

For more information on new features in Typescript 4.1 visit official
introductory blog post:
[Announcing TypeScript 4.1](https://devblogs.microsoft.com/typescript/announcing-typescript-4-1/)

## Canary channel

Warning that this should only be used by advanced users.

Upgrade using `deno upgrade --canary`. You must be on 1.6 or later. Mention
downgrading can corrupt deno dir.

`deno --version` output

Can be downloaded from dl.deno.land.

## Changes to `std/bytes`

As a part of the efforts of the
[Standard Library Working Group](https://github.com/denoland/deno/issues/8405);
`std/bytes` module has seen major overhaul.

Most of the APIs were renamed to better align with the APIs available on
`Array`:

- `copyBytes` -> `copy`
- `equal` -> `equals`
- `findIndex` -> `indexOf`
- `findLastIndex` -> `lastIndexOf`
- `hasPrefix` -> `startsWith`
- `hasSuffix` -> `endsWith`

---

The full release notes, including bug fixes, can be found at
https://github.com/denoland/deno/releases/tag/v1.6.0.
